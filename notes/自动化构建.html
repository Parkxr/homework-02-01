<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601748 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2092"/>

<div>
<span><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">自动化构建</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">常用的自动化构建工具</font></div><div><font face="Monaco">Grunt ， Gulp ， FIS</font></div></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Grunt</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>Grunt的基本使用</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">1、npm init</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">2、npm install grunt</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">3、创建一个gruntfile.js文件</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">4、在package.json里添加相应的script</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">5、在gruntfile.js里编写要执行的任务代码</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">6、npm run grunt '任务名' 启动任务</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">gruntfile.js是Grunt的入口文件，用于定义一些需要Grunt自动执行的任务。需要导出一个函数，次函数接受一个grunt的形参。</span></div><div>如果定义一个 'default'的任务的话 ，这个任务将成为grunt的默认任务，在运行任务的时候不需要指定任务名称，直接npm run grunt， grunt将自动调用default，一般用于映射其他任务，就是在第二个参数上传入一个数组，这个数组指定任务名字，grunt会依次执行数组里的任务，会把任务串联起来。</div><div><br/></div><div>grunt对异步的支持。</div><div>默认支持同步模式，如果需要异步操作，需要执行this.async()方法，得到一个回调函数，在异步操作完成后调用这个回调函数。</div></div><div><br/></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">module</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">exports</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(136, 136, 136); line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(240, 170, 11); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">registerTask</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'foo'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'Hello,Grunt!'</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">})</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">registerTask</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'secondTask'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'这是一个描述信息。'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">&quot;我的第二个任务。&quot;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">})</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">registerTask</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'async-task'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">function</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(){</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">let </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">done1</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(136, 136, 136); line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(250, 39, 142); font-weight: bold; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">async</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">setTimeout</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(()</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'async task1'</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">done1</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">1000</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">setTimeout</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(()</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'async task2'</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">done1</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">1000</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">})</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">registerTask</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'default'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">[</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'foo'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'secondTask'</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">])</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Grunt标记任务失败</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>如果代码当中发生错误， 可以标记为失败任务，可以在函数体内部return false实现。</div><div>如果是异步任务，可以done(false)来标记。</div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Grunt的配置方法</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"> 除了grunt.registerTask()方法以外grunt还</span>提供<span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">了添加一些配置选项的API,叫grunt.initConfig()，里面接收一个对象作为参数，对象的键一般与任务名称保持一致，属性的值可以为任意类型的数据。</span></div><div><font face="Monaco">在registerTask里的回调函数里可以使用grunt.config()来获取配置,config方法接收一个字符串参数，字符串就是刚才定义的键。</font></div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Grunt多目标任务</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">通过grunt.registerMultiTask()方法来定义。接受两个参数，第一个是参数的名字，第二个参数是函数。</font></div><div><font face="Monaco">通过grunt.initConfig()方法设置一些targets。</font></div><div><font face="Monaco">可以通过this.target, this.data来获取到当前的目标以及对应的值。</font></div><div><font face="Monaco">options会作为配置选项出现。可以通过this.options()方法来拿到配置选项。</font></div><div><font face="Monaco">目标中也可以添加options，如果与任务中的options重名的话，目标中的options会覆盖任务中的options</font></div></div><div><br/></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">module</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">exports</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(136, 136, 136); line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(240, 170, 11); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">initConfig</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">({</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">build</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">options</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">                </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">pxr</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">123</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">first</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">                </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">options</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">                    </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">pxr</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">999</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">                </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">                </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">html</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">1</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">            </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">second</span><span style="font-size: 14px; color: rgb(142, 142, 144); line-height: 19px;">:</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(255, 101, 0); line-height: 19px;">2</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">})</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">grunt</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">registerMultiTask</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'build'</span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">function</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(){</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(250, 39, 142); font-weight: bold; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">options</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">())</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">        </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(250, 39, 142); font-weight: bold; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">target</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(160, 161, 167); line-height: 19px;">,</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(250, 39, 142); font-weight: bold; line-height: 19px;">this</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">data</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">})</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">grunt插件</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">找到插件然后安装到npm模块当中</font></div><div><span style="font-family: Monaco;">通过grunt.loadNpmTasks()方法来加载插件任务</span></div><div><font face="Monaco">在grunt.initConfig()里面添加一些配置选项</font></div></div><div><img src="自动化构建_files/Image.png" type="image/png" data-filename="Image.png" width="466"/></div><div><font style="font-size: 12pt;"><br/></font></div><div><span style="font-size: 12pt; font-weight: bold;">Gulp基本使用</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">高效，易用</font></div><div><font face="Monaco">现在项目中安装一个gulp的开发依赖</font></div><div><font face="Monaco">在项目的根目录，也就是package.json下面添加一个gulpfile.js文件。用于编写需要gulp自动执行的任务。</font></div><div><font face="Monaco">编写完后可以使用gulp-cli来运行这些任务。</font></div><div><font face="Monaco">1、npm init</font></div><div><font face="Monaco">2、npm i gulp -D</font></div><div><font face="Monaco">3、npm i gulp-cli -D</font></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">4、创建一个gulpfile.js (gulp的入口文件)</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">5、npm run gulp foo</span></div><div><br/></div><div>最新的gulp取消了同步代码模式，约定一个任务必须都是一个异步的任务，当任务执行完成后需要调用回调函数来标记该任务已经完成。</div></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">exports</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">foo</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span><span style="font-size: 14px; color: rgb(136, 136, 136); line-height: 19px;">=</span><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;"> </span> <span style="font-size: 14px; color: rgb(240, 170, 11); line-height: 19px;">done</span><span style="font-size: 14px; color: rgb(124, 77, 255); font-weight: bold; line-height: 19px;">=&gt;</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">{</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(205, 96, 105); line-height: 19px;">console</span><span style="font-size: 14px; color: rgb(93, 93, 95); font-weight: bold; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(0, 190, 196); line-height: 19px;">log</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(83, 160, 83); line-height: 19px;">'foo task working!'</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">)</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(98, 98, 100); line-height: 19px;">    </span><span style="font-size: 14px; color: rgb(67, 122, 237); font-weight: bold; line-height: 19px;">done</span><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">()</span></div><div style="background-color: rgb(235, 238, 245); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(93, 93, 95); line-height: 19px;">}</span></div><div><br/></div><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Gulp的组合任务</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="color: rgb(93, 93, 95);"><font style="font-size: 9pt;">const { series, parallel } = require('gulp')</font></span></div><div><span style="color: rgb(93, 93, 95);"><font style="font-size: 9pt;">series是将任务串联，parallel是将任务并联。</font></span></div><div><span style="color: rgb(93, 93, 95);"><font style="font-size: 9pt;">exports.ppp = series(task1,task2,task3)</font></span></div><div>exports.xxx = parallel(task1,task2,task3)</div></div><div><br/></div><div><span style="font-size: 12pt; font-weight: bold;">Gulp的异步任务</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 9pt;">异步任务的三种方式</font></div><div><font style="font-size: 9pt;">1、通过回调函数实现</font></div><div><font style="font-size: 9pt;">exports.ppp_error = done =&gt; {</font></div><div><font style="font-size: 9pt;">    console.log('callback task!')</font></div><div><font style="font-size: 9pt;">    done(new Error('task failed!'))</font></div><div><font style="font-size: 9pt;">}</font></div><div><font style="font-size: 9pt;">2、通过promise</font></div><div><font style="font-size: 9pt;">exports.promise = () =&gt;{</font></div><div><font style="font-size: 9pt;">    console.log('promise task!')</font></div><div><font style="font-size: 9pt;">    return Promise.reject(new Error('task failed!'))</font></div><div><font style="font-size: 9pt;">}</font></div><div><font style="font-size: 9pt;">3、async awaite</font></div><div>exports.async= async() =&gt;{</div><div>    await timeout(1000)</div><div>    console.log('async task!')</div><div>}</div><div>4、</div><div>const fs = require('fs')</div><div>exports.stream = done =&gt; {</div><div>    const readStream = fs.createReadStream('package.json')</div><div>    const writetream = fs.createWriteStream('pxr.txt')</div><div>    readStream.pipe(writetream)</div><div>    return readStream</div><div>}</div></div><div><span style="font-size: 9pt; font-family: Monaco;"><br/></span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 